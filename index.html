<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kiboga Hill Farm Uganda</title>
  <meta name="description" content="Kiboga Hill Farm Uganda – Goats, cattle, bananas & coffee, with climate-smart advisory." />

	  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-C7B25Y1NGY"></script>
  <script>
    // GA4 base
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    // For single-page apps, we'll send page_view manually
    gtag('js', new Date());
    gtag('config', 'G-C7B25Y1NGY', { send_page_view: false });
  </script>

  <!-- (Your other scripts like Plausible or CSS links come here) -->
	
	<meta name="theme-color" content="#10b981">
<link rel="icon" href="Images/khf-logo.png">
<link rel="manifest" href="Images/manifest.json">

<!-- Open Graph / Twitter cards -->
<meta property="og:title" content="Kiboga Hill Farm Uganda">
<meta property="og:description" content="Goats, cattle, bananas & coffee — with weather-smart advisory.">
<meta property="og:image" content="Images/camp-poster.png">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kibogahillfarmuganda.co.ug/">
<meta name="twitter:card" content="summary_large_image">

<!-- SEO tags -->
<meta name="keywords" content="advertise Uganda farm, goats, farming ads Uganda, agriculture marketing, goat and cattle advertising, agri media Uganda, weather-smart advisory, Kiboga Hill Farm advertising">
<meta name="author" content="Kiboga Hill Farm Uganda">


<!-- LocalBusiness / Farm structured data -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Farm",
  "name":"Kiboga Hill Farm Uganda",
  "image":"https://kibogahillfarmuganda.co.ug/Images/khf-logo.png",
  "telephone":"+256763081880",
  "email":"info@kibogahillfarmuganda.co.ug",
  "address":{
    "@type":"PostalAddress",
    "addressCountry":"UG",
    "addressRegion":"Kiboga District",
    "streetAddress":"3Km from Kikuubo, Bukomero Town Council off Hoima Road, Kyomya S/C"
  },
  "geo":{"@type":"GeoCoordinates","latitude":0.716167,"longitude":32.0245},
  "url":"https://kibogahillfarmuganda.co.ug/",
  "sameAs":[
    "https://www.tiktok.com/@kiboga_hill_farm.ug",
    "https://www.instagram.com/kibogahillfarmuganda/",
    "https://www.youtube.com/@Kibogahillfarm.ug1",
    "https://web.facebook.com/profile.php?id=61581757133392"
  ]
}
</script>

	
	<style>
    :root{ --ink:#1f2937; --muted:#556070; --brand:#10b981; --amber:#f59e0b; --orange:#fb923c; --card:#ffffff; --shadow:0 10px 25px rgba(0,0,0,.08); --r:18px }
    *{box-sizing:border-box}
    body{margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"}
    .container{max-width:1140px;margin:auto;padding:0 16px}
    header.khf-header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.75);backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid #eee}
    .row{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;text-decoration:none;color:var(--ink)}
    .logo{width:38px;height:38px;border-radius:14px;display:grid;place-items:center;background:linear-gradient(135deg,#84cc16,#10b981);color:#fff;box-shadow:var(--shadow);font-weight:900}
    nav.khf-nav a{margin:0 10px;text-decoration:none;color:var(--ink);font-weight:700}
    nav.khf-nav a:hover{color:var(--brand)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:0;padding:10px 16px;border-radius:16px;background:var(--brand);color:#fff;cursor:pointer;box-shadow:var(--shadow);text-decoration:none;font-weight:800}
    .btn.out{background:#fff;color:var(--ink);border:2px solid #e9ecef}
    section{padding:56px 0}
    h1,h2,h3{color:#2f7d32;margin:0 0 8px}
    .muted{color:var(--muted)}
    .grid{display:grid;gap:16px}
    .cards{grid-template-columns:repeat(1,minmax(0,1fr))}
    .card{background:var(--card);border-radius:var(--r);box-shadow:var(--shadow);padding:18px}

	/* --- News / Spotlight styles --- */
.news-spotlight{ 
  flex:1 1 520px; display:flex; flex-direction:column; align-items:center; gap:12px;
}
.news-frame{
  width:clamp(360px,46vw,640px); aspect-ratio:1/1; background:#fff; border-radius:18px;
  box-shadow:var(--shadow); overflow:hidden; opacity:.001; transform:translateY(8px);
  transition:opacity .6s ease, transform .6s ease;
}
.news-frame.is-ready{ opacity:1; transform:none; }
.news-caption{ 
  width:100%; max-width:clamp(360px,46vw,640px); background:#fff; border-radius:16px; 
  box-shadow:var(--shadow); overflow:hidden; min-height:48px; display:grid; place-items:center;
}
.news-caption-line{
  padding:10px 14px; color:var(--ink); font-weight:600; text-align:center;
  animation: captionIn .6s ease both;
}
@keyframes captionIn{
  from{ opacity:0; transform:translateY(8px) }
  to{ opacity:1; transform:none }
}
/* respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .news-frame{ transition:none }
  .news-caption-line{ animation:none }
}

    /* -------- Hero -------- */
    .hero{
      display:flex;align-items:center;justify-content:space-between;gap:48px;flex-wrap:wrap;
      min-height:90vh;padding:80px 5%;background:linear-gradient(to bottom,#fff8ef,#f6f8e7);overflow:hidden;
    }
    .hero-text{ flex:1 1 460px; max-width:560px; }
    .hero-text h1{ font-size:2.8rem; line-height:1.2; color:var(--ink); font-weight:700; }
    .hero-text h1 span{ color:var(--brand); }
    .hero-text p{ font-size:1.05rem; color:var(--muted); margin-top:16px; line-height:1.6; }
    .hero-buttons{ display:flex; flex-wrap:wrap; gap:12px; margin-top:24px; }
    .hero-buttons .btn{ padding:12px 22px; border-radius:var(--r); font-weight:600; }

    /* Right column: poster + ticker */
    .hero-image{ flex:1 1 520px; display:flex; flex-direction:column; align-items:center; gap:12px; }
    .hero-frame{
      width:clamp(360px,46vw,640px); max-width:100%; aspect-ratio:1/1; padding:0; background:#fff;
      border-radius:18px; box-shadow:var(--shadow); overflow:hidden; animation:floaty 8s ease-in-out infinite;
    }
    .hero-frame img{ width:100%; height:100%; object-fit:contain; display:block; }
    @keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(6px)}}

    /* ---- Ticker (single clean version) ---- */
    .ticker{
      width:100%; max-width:clamp(360px,46vw,640px); margin:12px 0 0; background:#fff;
      border-radius:16px; box-shadow:var(--shadow); overflow:hidden;
    }
    .ticker-track{
      display:inline-flex; gap:32px; align-items:center; padding:10px 12px; white-space:nowrap;
      width:max-content; animation:tickerMove 28s linear infinite; will-change:transform;
    }
    @keyframes tickerMove{ from{transform:translateX(0)} to{transform:translateX(-50%)} }
    @media (prefers-reduced-motion: reduce){ .ticker-track{ animation:none } }

    /* --- Gallery + blur-up --- */
    .gallery-grid{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;align-items:stretch}
    .gallery-tile{flex:0 1 260px;display:flex;flex-direction:column;padding:0;text-align:center;overflow:hidden;cursor:zoom-in}
    .gallery-tile img{width:100%;height:200px;object-fit:cover;object-position:center;display:block;filter:blur(12px);transform:scale(1.02);transition:filter .35s ease, transform .35s ease}
    .gallery-tile img.img-loaded{filter:none;transform:none}
    .gallery-caption{padding:10px 12px;font-size:14px;line-height:1.35;color:var(--ink);text-align:center;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;min-height:40px}
    @media (max-width: 720px){.gallery-tile{flex-basis:200px}.gallery-tile img{height:160px}}

    .banner{background:linear-gradient(90deg,#10b981,#84cc16,#f59e0b);color:#fff;border-radius:var(--r);box-shadow:var(--shadow);padding:22px}
    .split{display:grid;grid-template-columns:1fr;gap:18px}
    footer{border-top:1px solid #eee;padding:24px 0;color:var(--muted);font-size:14px;margin-top:8px}
    .icon{width:36px;height:36px;border-radius:12px;display:grid;place-items:center;background:#ecfeff}
    @media(min-width:760px){.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:1024px){.cards{grid-template-columns:repeat(4,minmax(0,1fr))}}

    .khf-root{ min-height:100vh; background: linear-gradient(180deg,#FFF7E6,#FFF0D6,#F0FFE3); color: var(--ink); }

    /* ---- Family Application form ---- */
    .form-card{background:#fff;border-radius:var(--r);box-shadow:var(--shadow);padding:16px}
    .form-grid{display:grid;gap:12px}
    .form-grid.two{grid-template-columns:1fr}
    @media (min-width: 780px){ .form-grid.two{grid-template-columns:1fr 1fr} }
    label{font-weight:600;color:var(--ink);font-size:.95rem}
    input[type="text"],input[type="date"],input[type="email"],input[type="tel"],textarea{
      width:100%;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;font:inherit
    }
    textarea{min-height:110px;resize:vertical}
    .fieldset{border:1px solid #eef2f7;border-radius:14px;padding:14px}
    .legend{font-weight:800;color:#334155;margin-bottom:6px}
    .helper{color:var(--muted);font-size:.85rem}
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}

    /* === Nav dropdown === */
    .khf-nav{display:flex;gap:10px;align-items:center}
    .khf-nav details{position:relative}
    .khf-nav summary{list-style:none;cursor:pointer;padding:6px 10px;border-radius:10px;font-weight:700;color:var(--ink);user-select:none}
    .khf-nav summary::-webkit-details-marker{display:none}
    .khf-nav details[open] summary{background:#f3f4f6}
    .khf-nav .menu{
      position:absolute;inset-block-start:calc(100% + 8px);inset-inline-start:0;min-width:240px;background:#fff;
      border:1px solid #e5e7eb;border-radius:14px;box-shadow:var(--shadow);padding:8px;z-index:20
    }
    .khf-nav .menu a{display:block;padding:8px 10px;border-radius:10px;text-decoration:none;color:var(--ink);font-weight:600;white-space:nowrap}
    .khf-nav .menu a:hover{background:#f3f4f6;color:var(--brand)}
    .khf-nav .menu-label{font-size:12px;color:#6b7280;padding:6px 10px 4px;font-weight:800;text-transform:uppercase;letter-spacing:.02em}
    .khf-nav .menu-sep{height:1px;background:#f1f5f9;margin:6px 4px;border-radius:1px}
    @media (max-width:760px){ .khf-nav{flex-wrap:wrap} }
  </style>
</head>
<body>
  <a href="#main" style="position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;">Skip to content</a>
  <div id="root"></div>

  <!-- React (UMD) + Babel for in-browser JSX -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<!-- Supabase (UMD) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script type="text/babel" data-presets="env,react">

    const { useEffect, useMemo, useState } = React;

	// --- Supabase init (safe offline fallback) ---
const SUPABASE_URL  = "https://uieqtkdxnuqqvcpkgtiz.supabase.co";
const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpZXF0a2R4bnVxcXZjcGtndGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MDA4MTcsImV4cCI6MjA3NTE3NjgxN30.J5fkqIknkIgVX-As1yZfn1qbH2_vMfRPBhuvC2UxY3Y";

function makeNoopSupa() {
  const offlineErr = { message: "Supabase is not available (CDN offline/blocked)." };
  return {
    from() {
      return {
        insert: async () => ({ error: offlineErr }),
        select: async () => ({ data: [], error: offlineErr }),
        order() { return this; }
      };
    },
    auth: {
      getSession: async () => ({ data: { session: null } }),
      onAuthStateChange: () => ({ data: { subscription: { unsubscribe(){} } } }),
      signInWithPassword: async () => ({ error: offlineErr }),
      signOut: async () => ({ error: null }),
    }
  };
}

let supa = makeNoopSupa();
if (window.supabase?.createClient) {
  try { supa = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON); }
  catch (e) { console.warn("Supabase init failed; using offline fallback.", e); }
}

    /* ---------------- Data ---------------- */
    const Camps = () => (
  <section className="page" id="camps">
    <div className="container">
      <h2>Camps & Farm Visits</h2>
      <p className="muted">
        Our farm visits and camps involves hands-on sessions for all our visitors and we highly encourage participation from women, youth, people with special needs and community groups — Yummy goat BBQ,
        mountain hiking and a campfire are part of unforgottable moments during our camps. We camp in a natural ecosystem with spectacular scenary and freshest air you have never breathed any where in the world.
      </p>

      <div className="grid cards" style={{gridTemplateColumns:"repeat(1,minmax(0,1fr))"}}>
        <div className="card">
          <b>What to expect</b>
          <ul className="muted" style={{margin:"8px 0 0 16px"}}>
            <li>Half-day and full-day training modules</li>
            <li>Guided walks through farm departments</li>
            <li>Housing, record-keeping, biosecurity & disease control</li>
            <li>Special organically grown foods during the visits</li>
            <li>Fun games and team activities</li>
			<li>Experience sharing around the campfire</li>
            <li>Group rates for schools and SACCOs</li>
          </ul>
        </div>

        <div className="card">
          <b>Book a Visit /or Camp</b>
          <p className="muted">Call or WhatsApp <a href="https://wa.me/256763081880" target="_blank" rel="noopener noreferrer">+256 763 081 880</a>.</p>
          <a className="btn" href="https://wa.me/256763081880" target="_blank" rel="noopener noreferrer">WhatsApp to Book</a>
        </div>
      </div>
    </div>
  </section>
);
    
    const PRODUCTS = [
      { slug: "goats", icon: "🐐", title: "Goats", desc: "Savanna, Galla, Boer & local Mubende lines for meat and resilience.", details: [
        "Breeding: structured cross-breeding for growth & hardiness",
        "Feeding: pasture-led; banana/coffee residues for circular nutrients",
        "Health: vaccination & deworming calendar; humane handling",
        "Sales: live weight pricing; farm-gate pick-up"
      ]},
      { slug: "cattle", icon: "🐄", title: "Cattle", desc: "Hardy breeds managed under humane, pasture-led systems.", details: [
        "Breeds: Ankole, Friesian crosses depending on system",
        "Grazing: rotational paddocks; water & shade planning",
        "Dairy & Beef: weaner calves, heifers, and steers",
        "Records: simple books for births, weights, treatments"
      ]},
      { slug: "bananas", icon: "🍌", title: "Bananas", desc: "Matooke blocks integrated with goats for nutrient recycling.", details: [
        "Spacing & mulching for moisture retention",
        "Manure use: composted goat bedding",
        "Pest/Disease: early detection & sanitation",
        "Market: bunch grading & handling"
      ]},
      { slug: "coffee", icon: "☕", title: "Coffee", desc: "Robusta & Arabica seedlings and farm-gate green beans.", details: [
        "Seedlings: vigorous varieties; shade integration",
        "Weed & canopy management",
        "Harvest: selective picking for quality",
        "Post-harvest: drying guidelines and storage"
      ]}
    ];

    const SERVICES = [
      { slug: "sales", icon: "🏪", title: "Farm-Gate Services", text: "We buy and sell Goats, cows, Sheep, Chicken, coffee, and other seasonal produce.", details: [
        "Order by WhatsApp; pickup windows shared weekly",
        "Bulk discounts for groups (Youth, Women and Persons with Special Needs as well as the Kiboga Hill Farm Family members",
        "Quality assurance and humane standards"
      ]},

    ];

    /* ---------------- Maps helpers ---------------- */
    const MAP = {
      label: "Kiboga Hill Farm Uganda",
      address: "3Km from Kikuubo, Bukomero Town Council off Hoima Road, Kyomya Sub county Kiboga District, Uganda",
      lat: 0.716167,
      lng: 32.0245,
    };
    const mapsSearchUrl = () => `https://www.google.com/maps/search/?api=1&query=${MAP.lat},${MAP.lng}`;
    const mapsDirectionsUrl = () => `https://www.google.com/maps/dir/?api=1&destination=${MAP.lat},${MAP.lng}`;
    const mapsEmbedSrc = (type = 'satellite') => {
      const t = type === 'satellite' ? 'k' : (type === 'hybrid' ? 'h' : 'm');
      return `https://maps.google.com/maps?q=${MAP.lat},${MAP.lng}&z=15&t=${t}&output=embed`;
    };

    /* ---------------- Tiny hash router ---------------- */
    function useHashRoute(){
      const [hash, setHash] = useState(() => window.location.hash || "#/");
      useEffect(() => {
        const onChange = () => setHash(window.location.hash || "#/");
        window.addEventListener("hashchange", onChange);
        return () => window.removeEventListener("hashchange", onChange);
      }, []);
      const parts = useMemo(() => hash.replace(/^#/, "").split("/").filter(Boolean), [hash]);
      return { parts };
    }

    const Link = ({ to, className = "", children, ...rest }) => (
      <a href={to} className={className} {...rest}>{children}</a>
    );

    const NotFound = ({ what = "Page" }) => (
      <section className="page" id="not-found">
        <div className="container">
          <h2>{what} Not Found</h2>
          <p className="muted">Sorry, the {what.toLowerCase()} you’re looking for doesn’t exist.</p>
          <Link className="btn out" to="#/">← Back Home</Link>
        </div>
      </section>
    );

    /* ---------------- Home ---------------- */
    const Home = () => (
     <section className="hero">
        <div className="hero-text">
          <h1>
            Quality.<br />
            Resilient.<br />
            <span>Ugandan</span> Farming.
          </h1>
          <p>
            We rear, buy and sell healthy and best breeds of goats, sheep, cattle, and chicken.
            We also grow, buy and sell coffee, bananas, maize, and trees — we are powered by farming
            passion and driven by science. We also utilise weather and climate forecasts for better
            yields and livestock production. On top of all of that we conduct educational farm visits and camps.
          </p>

          <div className="hero-buttons">
            <a href="#/about" className="btn" style={{ background: "var(--brand)", color: "white" }}>
              Explore Our Farm
            </a>
            <a href="#/family" className="btn out">
 			 Join the Family Project
			</a>

          </div>
        </div>

 <div className="hero-image">
  <NewsSpotlight/>
</div>

	 </section>
    );

    /* ---------------- Other Pages ---------------- */
    const About = () => (
      <section className="page" id="about">
        <div className="container">
          <h2>About Us</h2>
          <p className="muted">Kiboga Hill Farm Uganda blends modern agri-business with local wisdom. Led by a professional meteorologist, we integrate seasonal forecasts and on-farm observations to reduce risk, cut losses, and improve productivity—from breeding choices to harvest timing.</p>
        </div>
      </section>
    );

    const ProductsIndex = () => (
      <section className="page" id="products">
        <div className="container">
          <h2>Livestock & Crops</h2>
          <div className="grid cards">
            {PRODUCTS.map((item) => (
              <div key={item.slug} className="card">
                <div style={{display: "flex", gap: 10, alignItems: "center"}}>
                  <div className="icon" aria-hidden>{item.icon}</div>
                  <b>{item.title}</b>
                </div>
                <p className="muted" style={{marginTop: 8}}>{item.desc}</p>
                <div style={{marginTop: 8}}>
                  <Link className="btn out" to={`#/products/${item.slug}`}>View details</Link>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );

    const ProductDetail = ({ slug }) => {
      const p = PRODUCTS.find(x => x.slug === slug);
      if (!p) return <NotFound what="Product"/>;
      return (
        <section className="page" id={`product-${slug}`}>
          <div className="container">
            <div style={{display:"flex", justifyContent:"space-between", alignItems:"center", gap:12, flexWrap:"wrap"}}>
              <h2 style={{display:"flex", alignItems:"center", gap:10}}><span className="icon" aria-hidden>{p.icon}</span>{p.title}</h2>
              <Link className="btn out" to="#/products">← Back to Livestock & Crops</Link>
            </div>
            <p className="muted" style={{marginTop:8}}>{p.desc}</p>
            <ul className="muted" style={{margin: "12px 0 0 18px"}}>
              {p.details.map(d => <li key={d}>{d}</li>)}
            </ul>
          </div>
        </section>
      );
    };

    const ServicesIndex = () => (
      <section className="page" id="services">
        <div className="container">
          <h2>What We Offer</h2>
          <div className="grid cards" style={{gridTemplateColumns: "repeat(1,minmax(0,1fr))"}}>
            {SERVICES.map(s => (
              <div key={s.slug} className="card">
                <div style={{display: "flex", gap: 10, alignItems: "center"}}>
                  <div className="icon" aria-hidden>{s.icon}</div>
                  <b>{s.title}</b>
                </div>
                <p className="muted" style={{marginTop: 8}}>{s.text}</p>
                <div style={{marginTop: 8}}>
                  <Link className="btn out" to={`#/services/${s.slug}`}>View details</Link>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );

    const ServiceDetail = ({ slug }) => {
      const s = SERVICES.find(x => (x.slug || "").toLowerCase() === slug);
      if (!s) return <NotFound what="Service"/>;
      return (
        <section className="page" id={`service-${slug}`}>
          <div className="container">
           <h2 style={{display:"flex", alignItems:"center", gap:10}}>
  			<span className="icon" aria-hidden>{s.icon}</span>{s.title}
		   </h2>

            <p className="muted" style={{marginTop:8}}>{s.text}</p>
            <ul className="muted" style={{margin: "12px 0 0 18px"}}>
              {s.details.map(d => <li key={d}>{d}</li>)}
            </ul>
          </div>
        </section>
      );
    };

const Family = () => {
  // Small helper component for collapsible objective groups
  const Objective = ({ icon = "🌿", title, items }) => {
    const prefersOpen = (typeof window !== "undefined" ? window.innerWidth >= 760 : true);
    const [open, setOpen] = React.useState(prefersOpen);
    const [hover, setHover] = React.useState(false);

    const cardStyle = {
      background: "rgba(255,255,255,.92)",
      border: "1px solid #e5e7eb",
      borderRadius: 14,
      padding: 12,
      margin: "10px 0",
      boxShadow: hover ? "0 12px 28px rgba(0,0,0,.10)" : "0 6px 18px rgba(0,0,0,.06)",
      transform: hover ? "translateY(-1px)" : "none",
      transition: "box-shadow .25s ease, transform .25s ease, background .25s ease"
    };

    const sumStyle = {
      listStyle: "none",
      cursor: "pointer",
      display: "flex",
      alignItems: "center",
      gap: 10,
      fontWeight: 800,
      color: "#2f7d32",
      padding: "4px 2px",
      userSelect: "none"
    };

    return (
      <details
        open={open}
        onToggle={e => setOpen(e.currentTarget.open)}
        onMouseEnter={() => setHover(true)}
        onMouseLeave={() => setHover(false)}
        style={cardStyle}
      >
        <summary style={sumStyle}>
          <span aria-hidden style={{
            width: 28, height: 28, borderRadius: 10, display: "grid", placeItems: "center",
            background: "linear-gradient(135deg,#22c55e,#84cc16)", color: "#fff", fontSize: 16, fontWeight: 900
          }}>
            {icon}
          </span>
          {title}
          <span className="muted" style={{ marginLeft: 8, fontWeight: 600, fontSize: 13 }}>
            {open ? "— tap to collapse" : "— tap to expand"}
          </span>
        </summary>

        <ul className="muted" style={{ margin: "8px 0 0 22px" }}>
          {items.map((p) => <li key={p}>{p}</li>)}
        </ul>
      </details>
    );
  };

  return (
    <section className="page" id="family">
      <div className="container">

        {/* Background / Story */}
        <FamilyBackground />

        {/* Family Project – goal */}
        <div
          style={{
            background: "linear-gradient(90deg,#34d399,#fbbf24)",
            padding: "20px 24px",
            borderRadius: "16px",
            marginBottom: 20
          }}
        >
          <h2 style={{ margin: 0 }}>Family Project</h2>
          <p style={{ marginTop: 8 }}>
            <b>Goal:</b> To support and encourage our high farming passionate and loving
            members towards starting small but with a future dream of reaping big from
            Agriculture.
          </p>
        </div>

        {/* Objectives (collapsible with icons) */}
        <div
          style={{
            background: "linear-gradient(90deg,#34d399,#fbbf24)",
            padding: "20px 24px",
            borderRadius: "16px",
            marginBottom: 20
          }}
        >
          <h2 style={{ marginTop: 0 }}>Family Project Objectives</h2>

          <Objective
            icon="✅"
            title="Jump Start"
            items={["Dream Big", "Motivate One Another", "Grow Passion", "Learn"]}
          />
          <Objective
            icon="🤝"
            title="Social Network"
            items={["Meet and Make many Friends", "Keep True Friends", "Teamwork"]}
          />
          <Objective
            icon="📋"
            title="Project Management"
            items={["Choice of Enterprise", "Project Direction", "Collective Decisions", "3-month Camps"]}
          />
          <Objective
            icon="📈"
            title="Collective Marketing"
            items={["Collective Advertising", "Quality Standards & Assurance"]}
          />
        </div>

        {/* Apply button */}
        <div style={{ marginTop: 12 }}>
          <a className="btn" href="#/family/join" aria-label="Apply to Family Program">Apply now →</a>
        </div>
      </div>
    </section>
  );
};

/* ---- Weather updates (add new rows over time) ---- */
const WEATHER_UPDATES = [
  {
    id: "2025-10",
    title: "Weather Update — October 2025",
    date: "2025-10-09",
    // keep this brief; you can edit later
    summary:
      "Peak of the SOND 2025 rainy season expected in October. Enhanced rainfall likely over most of Uganda. Areas near Lake Victoria and parts of western, which had intermittent rainfall, are expected to receive enhanced rainfall during October.",
    // put your signed PDF and (optional) image into the repo and point to them:
    pdf: "docs/Weather-Update-October-2025-SIGNED.pdf",
    image: "Images/updates/oct-2025-rainfall-outlook.png" // optional preview image
  }
  // add the next months here…
];



  const Advisory = () => {
  const [openId, setOpenId] = React.useState(null); // which update is expanded

  return (
    <section className="page" id="advisory">
      <div className="container">
        <h2>Weather-Smart Advisory</h2>
        <p className="muted">
          We use and share with our community members actionable advisories for crop and
          livestock production, including water-stress and disease-risk management. We
          translate official weather & climate forecasts into simple actions like when to
          plant, vaccinate, and manage heat or rainfall. Visit our social channels for tips.
        </p>

        {/* ---- Latest Weather Updates ---- */}
        <div className="card" style={{ margin: "18px 0" }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", gap: 12, flexWrap: "wrap" }}>
            <h3 style={{ margin: 0 }}>Latest Weather Updates</h3>
            <a className="btn out" href="#/advisory">Refresh</a>
          </div>

          {WEATHER_UPDATES.length === 0 ? (
            <div className="muted" style={{ marginTop: 8 }}>No updates posted yet.</div>
          ) : (
            <div className="grid" style={{ marginTop: 12, gap: 12 }}>
              {WEATHER_UPDATES.map(u => (
                <article key={u.id} className="card" style={{ padding: 14 }}>
                  <div style={{ display: "flex", justifyContent: "space-between", gap: 10, alignItems: "center", flexWrap: "wrap" }}>
                    <div>
                      <b style={{ display: "block" }}>{u.title}</b>
                      <span className="muted" style={{ fontSize: 13 }}>
                        Posted {new Date(u.date).toLocaleDateString(undefined, { year:"numeric", month:"long", day:"numeric" })}
                      </span>
                    </div>
                    <div style={{ display: "flex", gap: 8, flexWrap: "wrap" }}>
                      <a
                        className="btn"
                        href={u.pdf}
                        target="_blank"
                        rel="noopener noreferrer"
                        data-ga-event="weather_pdf_view"
                        data-ga-label={u.title}
                      >
                        View Issued/Signed PDF
                      </a>
                      <a
                        className="btn out"
                        href={u.pdf}
                        download
                        data-ga-event="weather_pdf_download"
                        data-ga-label={u.title}
                      >
                        Download
                      </a>
                      <button
                        className="btn out"
                        onClick={() => setOpenId(openId === u.id ? null : u.id)}
                      >
                        {openId === u.id ? "Hide Summary" : "Read Summary"}
                      </button>
                    </div>
                  </div>

                  {openId === u.id && (
                    <div style={{ marginTop: 10 }}>
                      <p className="muted" style={{ marginTop: 8 }}>{u.summary}</p>

                      {u.image && (
                        <figure style={{ margin: 0, marginTop: 8 }}>
                          <img
                            src={u.image}
                            alt={`${u.title} — Rainfall outlook map`}
                            loading="lazy"
                            style={{ maxWidth: "100%", height: "auto", borderRadius: 12, boxShadow: "0 8px 24px rgba(0,0,0,.06)" }}
                          />
                          <figcaption className="muted" style={{ fontSize: 12, marginTop: 6 }}>
                            October 2025 rainfall outlook map (source: official release).
                          </figcaption>
                        </figure>
                      )}

                      {/* Inline viewer (optional). Comment out if not needed. */}
                      <details style={{ marginTop: 10 }}>
                        <summary style={{ cursor: "pointer", fontWeight: 700, color: "var(--ink)" }}>
                          Quick Preview (embedded PDF)
                        </summary>
                        <div style={{ position: "relative", width: "100%", paddingBottom: "62%", marginTop: 8, borderRadius: 12, overflow: "hidden", boxShadow: "0 8px 24px rgba(0,0,0,.06)" }}>
                          <iframe
                            src={u.pdf}
                            title={`${u.title} — PDF`}
                            style={{ position: "absolute", inset: 0, width: "100%", height: "100%", border: 0 }}
                            loading="lazy"
                          ></iframe>
                        </div>
                      </details>
                    </div>
                  )}
                </article>
              ))}
            </div>
          )}
        </div>

        {/* ---- Your existing advisory tiles ---- */}
        <div className="grid cards" style={{ gridTemplateColumns: "repeat(1,minmax(0,1fr))" }}>
          {[
            { title: "Crop Care", text: "When to plant, weed, irrigate, apply fertilizers, and harvest." },
            { title: "Harvest & Post-Harvest", text: "When to harvest; dry-spell & rain-risk timing for safe drying and storage plans." },
            { title: "Livestock Care", text: "Heat-stress alerts, water plans, and disease-risk updates." },
            { title: "Livestock Farm Start", text: "Housing designs, breeding guidance, and health schedules." },
          ].map(a => (
            <div key={a.title} className="card">
              <b>{a.title}</b>
              <p className="muted" style={{ marginTop: 8 }}>{a.text}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

    /* -------- Email helpers -------- */
    const EMAIL_PRIMARY = "info@kibogahillfarmuganda.co.ug";
    const MAIL_SUBJECT  = encodeURIComponent("Inquiry from Kiboga Hill Farm website");
    const MAIL_BODY     = encodeURIComponent("Hello Kiboga Hill Farm team,\n\nI’d like to ask about …\n\nThanks,");

    /* ---------------- Contact ---------------- */
    const Contact = () => {
      const [mapType, setMapType] = React.useState("satellite");
      return (
        <section className="page" id="contact">
          <div className="container">
            <h2>Contact</h2>

            <div className="grid cards" style={{ gridTemplateColumns: "repeat(1,minmax(0,1fr))" }}>
              <div className="card">
                <b>Phone & WhatsApp</b>
                <div className="muted"><a href="tel:+256763081880">+256 (0) 763 081 880</a></div>
              </div>

              <div className="card">
                <b>Email</b>
				  <p><a href={`mailto:${EMAIL_PRIMARY}`}>{EMAIL_PRIMARY}</a></p>
				  <a className="btn"
   				  href={`mailto:${EMAIL_PRIMARY}?subject=Hello%20Kiboga%20Hill%20Farm&body=Hi%20KHF%20Team,%0A%0AMy%20name%20is%20____.%20I%27m%20interested%20in%20____.%0A%0ARegards,%0A____`}>
  					Email Us
				</a>

              </div>

              <div className="card">
                <b>Location</b>
                <div className="muted">{MAP.address}</div>
                <div style={{display:"flex",gap:10,flexWrap:"wrap",marginTop:10}}>
                  <a className="btn" href={mapsSearchUrl()} target="_blank" rel="noopener noreferrer">Open in Google Maps</a>
                  <a className="btn out" href={mapsDirectionsUrl()} target="_blank" rel="noopener noreferrer">Get Directions</a>
                </div>
              </div>

              <div className="card">
                <b>Social</b>
                <div style={{ display:"flex", gap:10, flexWrap:"wrap", marginTop:10 }}>
                  <a className="btn" href="https://wa.me/256703663616" target="_blank" rel="noopener noreferrer">WhatsApp</a>
                  <a className="btn out" href="https://www.tiktok.com/@kiboga_hill_farm.ug" target="_blank" rel="noopener noreferrer">TikTok</a>
                  <a className="btn out" href="https://www.instagram.com/kibogahillfarmuganda/" target="_blank" rel="noopener noreferrer">Instagram</a>
                  <a className="btn out" href="https://www.youtube.com/@Kibogahillfarm.ug1" target="_blank" rel="noopener noreferrer">YouTube</a>
                  <a className="btn out" href="https://web.facebook.com/profile.php?id=61581757133392" target="_blank" rel="noopener noreferrer">Facebook</a>
                </div>
              </div>
            </div>

            <div className="card" style={{ marginTop:16, padding:0, overflow:"hidden" }}>
              <div style={{ display:"flex", gap:8, justifyContent:"flex-end", padding:"10px 12px" }}>
                <button className={mapType==="roadmap" ? "btn" : "btn out"} onClick={()=>setMapType("roadmap")}>Map</button>
                <button className={mapType==="satellite" ? "btn" : "btn out"} onClick={()=>setMapType("satellite")}>Satellite</button>
                <button className={mapType==="hybrid" ? "btn" : "btn out"} onClick={()=>setMapType("hybrid")}>Hybrid</button>
              </div>

              <div style={{ position:"relative", width:"100%", paddingBottom:"56%" }}>
                <iframe title="Kiboga Hill Farm – Map"
                        src={mapsEmbedSrc(mapType)}
                        style={{ position:"absolute", inset:0, width:"100%", height:"100%", border:0 }}
                        loading="lazy"
                        referrerPolicy="no-referrer-when-downgrade"></iframe>
              </div>
              <div style={{ padding:12, fontSize:12, color:"#556070" }}>
                Pin set to exact GPS coordinates: {MAP.lat}, {MAP.lng}
              </div>
            </div>
          </div>
        </section>
       );
    };

    /* ---------------- Family Application ---------------- */
    const FamilyForm = () => {
      const todayStr = new Date().toISOString().slice(0,10);

      const [f, setF] = React.useState({
        first:'', middle:'', last:'', dob:'', email:'', phone:'', nin:'', addr:'', role:'', inst:'', instAddr:'',
        why:'', skills:'',
        k1first:'', k1middle:'', k1last:'', k1addr:'', k1tel:'',
        k2first:'', k2middle:'', k2last:'', k2addr:'', k2tel:'',
        agree1:false, agree2:false, agree3:false, agree4:false, agree5:false,
        sign:'', sdate: todayStr
      });

      const [submitting, setSubmitting] = React.useState(false);
      const [doneMsg, setDoneMsg] = React.useState("");
      const [errMsg,  setErrMsg]  = React.useState("");

      const change = (e) => {
        const {name,type,checked,value} = e.target;
        setF(s => ({...s, [name]: type==='checkbox' ? checked : value}));
      };

      const asText = () => `
KIBOGA HILL FARM UGANDA – FAMILY PROJECT
Membership Application

PERSONAL DATA
Name: ${f.first} ${f.middle} ${f.last}
DOB: ${f.dob}
Email: ${f.email}
Phone: ${f.phone}
NIN/Passport: ${f.nin}
Residence: ${f.addr}
Designation: ${f.role}
Institution: ${f.inst}
Institution Address: ${f.instAddr}

Reason for joining:
${f.why}

Skills / Interests to contribute:
${f.skills}

NEXT OF KIN – First Choice
${f.k1first} ${f.k1middle} ${f.k1last}
Residence: ${f.k1addr} | Tel: ${f.k1tel}

NEXT OF KIN – Second Choice
${f.k2first} ${f.k2middle} ${f.k2last}
Residence: ${f.k2addr} | Tel: ${f.k2tel}

DECLARATION (checked = agreed)
1) Info true/accurate: ${f.agree1 ? '✓' : '—'}
2) Abide by meeting resolutions: ${f.agree2 ? '✓' : '—'}
3) Right to withdraw; 2-month settlement: ${f.agree3 ? '✓' : '—'}
4) Misconduct can lead to removal; 2-month settlement: ${f.agree4 ? '✓' : '—'}
5) Late contribution penalties: ${f.agree5 ? '✓' : '—'}

Signature (typed): ${f.sign}
Date: ${f.sdate}
      `.trim();

      const sendEmail = () => {
        const body = encodeURIComponent(asText());
        const subject = encodeURIComponent("Family Membership Application");
        window.location.href = `mailto:${EMAIL_PRIMARY}?subject=${subject}&body=${body}`;
      };

      const downloadTxt = () => {
        const blob = new Blob([asText()], {type:'text/plain'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = `KHFU-application-${f.first||'member'}.txt`;
        a.click();
        URL.revokeObjectURL(url);
      };

      const submitToDB = async () => {
        setSubmitting(true);
        setDoneMsg(""); setErrMsg("");

        const payload = {
          first: f.first, middle: f.middle, last: f.last,
          dob: f.dob || null,
          email: f.email, phone: f.phone, nin: f.nin, addr: f.addr,
          role: f.role, inst: f.inst, instAddr: f.instAddr,
          why: f.why, skills: f.skills,
          k1first: f.k1first, k1middle: f.k1middle, k1last: f.k1last, k1addr: f.k1addr, k1tel: f.k1tel,
          k2first: f.k2first, k2middle: f.k2middle, k2last: f.k2last, k2addr: f.k2addr, k2tel: f.k2tel,
          sign: f.sign, sdate: f.sdate || null
        };

        const { error } = await supa.from("family_applications").insert(payload);
        if (error) setErrMsg(error.message || "Could not submit. Please try again.");
        else      setDoneMsg("Application submitted privately. Thank you!");
        setSubmitting(false);
      };

      const allAgreed = f.agree1 && f.agree2 && f.agree3 && f.agree4 && f.agree5 && f.sign;

      return (
        <section className="page" id="family-join">
          <div className="container">
            <h2>Join Kiboga Hill Farm Family Project</h2>
            <p className="muted">Fill out the application below. You can send it by email or download a copy.</p>

            <div className="form-card">
              <div className="fieldset">
                <div className="legend">Personal Data / Biodata</div>
                <div className="form-grid two">
                  <div><label>First Name</label><input name="first" value={f.first} onChange={change} required/></div>
                  <div><label>Middle Name</label><input name="middle" value={f.middle} onChange={change}/></div>
                  <div><label>Last Name</label><input name="last" value={f.last} onChange={change} required/></div>
                  <div><label>Date of Birth</label><input type="date" name="dob" value={f.dob} onChange={change} required/></div>
                  <div><label>Email</label><input type="email" name="email" value={f.email} onChange={change} required/></div>
                  <div><label>Telephone</label><input type="tel" name="phone" value={f.phone} onChange={change} required/></div>
                  <div><label>NIN / Passport</label><input name="nin" value={f.nin} onChange={change}/></div>
                  <div><label>Current Residential Address</label><input name="addr" value={f.addr} onChange={change}/></div>
                  <div><label>Designation</label><input name="role" value={f.role} onChange={change}/></div>
                  <div><label>Institution</label><input name="inst" value={f.inst} onChange={change}/></div>
                  <div className="two" style={{gridColumn:'1 / -1'}}><label>Institution Address</label><input name="instAddr" value={f.instAddr} onChange={change}/></div>
                </div> 
              </div>

              <div className="fieldset">
                <div className="legend">Reason for joining</div>
                <textarea name="why" value={f.why} onChange={change} placeholder="Why are you interested in joining this family project?" />
              </div>

              <div className="fieldset">
                <div className="legend">Special skills / interests to contribute</div>
                <textarea name="skills" value={f.skills} onChange={change} placeholder="List any skills or interests you would like to contribute" />
              </div>

              <div className="fieldset">
                <div className="legend">Next of Kin – First Choice</div>
                <div className="form-grid two">
                  <div><label>First Name</label><input name="k1first"  value={f.k1first}  onChange={change} /></div>
                  <div><label>Middle Name</label><input name="k1middle" value={f.k1middle} onChange={change} /></div>
                  <div><label>Last Name</label><input name="k1last"   value={f.k1last}   onChange={change} /></div>
                  <div><label>Permanent Residence</label><input name="k1addr" value={f.k1addr} onChange={change} /></div>
                  <div><label>Telephone</label><input name="k1tel"    value={f.k1tel}    onChange={change} /></div>
                </div>
              </div>

              <div className="fieldset">
                <div className="legend">Next of Kin – Second Choice</div>
                <div className="form-grid two">
                  <div><label>First Name</label><input name="k2first"  value={f.k2first}  onChange={change} /></div>
                  <div><label>Middle Name</label><input name="k2middle" value={f.k2middle} onChange={change} /></div>
                  <div><label>Last Name</label><input name="k2last"   value={f.k2last}   onChange={change} /></div>
                  <div><label>Permanent Residence</label><input name="k2addr" value={f.k2addr} onChange={change} /></div>
                  <div><label>Telephone</label><input name="k2tel"    value={f.k2tel}    onChange={change} /></div>
                </div>
              </div>

              <div className="fieldset">
                <div className="legend">Declaration</div>
                <div className="form-grid">
                  <label><input type="checkbox" name="agree1" checked={f.agree1} onChange={change}/> The information provided is true and accurate.</label>
                  <label><input type="checkbox" name="agree2" checked={f.agree2} onChange={change}/> I will abide by family meeting resolutions.</label>
                  <label><input type="checkbox" name="agree3" checked={f.agree3} onChange={change}/> I may withdraw; contributions/benefits payable after 2 months.</label>
                  <label><input type="checkbox" name="agree4" checked={f.agree4} onChange={change}/> Misconduct can lead to removal; 2-month settlement.</label>
                  <label><input type="checkbox" name="agree5" checked={f.agree5} onChange={change}/> Late contributions may attract penalties.</label>
                </div>

                <div className="form-grid two" style={{marginTop:8}}>
                  <div><label>Signature (type your full name)</label><input name="sign" value={f.sign} onChange={change} required/></div>
                  <div><label>Date</label><input type="date" name="sdate" value={f.sdate} onChange={change} required/></div>
                </div>

                <div className="helper">Admin approval is done later by the Chairperson/Director.</div>
              </div>

              {doneMsg && <div className="card" style={{background:"#ecfdf5", color:"#065f46"}}>{doneMsg}</div>}
              {errMsg  && <div className="card" style={{background:"#fef2f2", color:"#991b1b"}}>{errMsg}</div>}

              <div className="actions">
                <button type="button" className="btn" onClick={submitToDB} disabled={!allAgreed || submitting}>
                  {submitting ? "Submitting…" : "Submit (private)"}
                </button>
                <button type="button" className="btn out" onClick={sendEmail} disabled={!allAgreed}>Send by Email</button>
                <button type="button" className="btn out" onClick={downloadTxt}>Download Application (.txt)</button>
              </div>
            </div>
          </div>
        </section>
      );
    };

    const Admin = () => {
      const [session, setSession] = useState(null);
      const [rows, setRows] = useState([]);
      const [loading, setLoading] = useState(false);
      const [err, setErr] = useState("");

      useEffect(() => {
        supa.auth.getSession().then(({ data }) => setSession(data.session || null));
        const { data: sub } = supa.auth.onAuthStateChange((_event, sess) => setSession(sess));
        return () => sub?.subscription?.unsubscribe();
      }, []);

      useEffect(() => {
        if (!session) return;
        setLoading(true); setErr("");
        supa.from("family_applications").select("*").order("created_at", { ascending: false })
          .then(({ data, error }) => {
            if (error) setErr(error.message);
            else setRows(data || []);
          })
          .finally(() => setLoading(false));
      }, [session]);

      const onSignIn = async (e) => {
        e.preventDefault();
        setErr("");
        const email = e.target.email.value;
        const password = e.target.password.value;
        const { error } = await supa.auth.signInWithPassword({ email, password });
        if (error) setErr(error.message);
      };

      const onSignOut = async () => {
        await supa.auth.signOut();
        setRows([]);
      };

      if (!session) {
        return (
          <section className="page" id="admin">
            <div className="container">
              <h2>Admin — Members List</h2>
              <p className="muted">Sign in to view applications.</p>
              {err && <div className="card" style={{background:"#fef2f2", color:"#991b1b"}}>{err}</div>}
              <form className="card" onSubmit={onSignIn} style={{maxWidth:420}}>
                <div><label>Email</label><input name="email" type="email" required /></div>
                <div style={{marginTop:8}}><label>Password</label><input name="password" type="password" required /></div>
                <div style={{marginTop:12}}><button className="btn" type="submit">Sign in</button></div>
              </form>
            </div>
          </section>
        );
      }

      return (
        <section className="page" id="admin">
          <div className="container">
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"}}>
              <h2>Members (Private)</h2>
              <button className="btn out" onClick={onSignOut}>Sign out</button>
            </div>

            {err && <div className="card" style={{background:"#fef2f2", color:"#991b1b"}}>{err}</div>}
            {loading ? <div className="card">Loading…</div> : (
              <div className="card" style={{overflowX:"auto"}}>
                {rows.length === 0 ? (
                  <div className="muted">No applications yet.</div>
                ) : (
                  <table style={{width:"100%", borderCollapse:"collapse"}}>
                    <thead>
                      <tr>
                        <th style={{textAlign:"left", padding:"8px"}}>Date</th>
                        <th style={{textAlign:"left", padding:"8px"}}>Name</th>
                        <th style={{textAlign:"left", padding:"8px"}}>Phone</th>
                        <th style={{textAlign:"left", padding:"8px"}}>Email</th>
                        <th style={{textAlign:"left", padding:"8px"}}>Why Join</th>
                      </tr>
                    </thead>
                    <tbody>
                      {rows.map(r => (
                        <tr key={r.id} style={{borderTop:"1px solid #eee"}}>
                          <td style={{padding:"8px"}}>{new Date(r.created_at).toLocaleString()}</td>
                          <td style={{padding:"8px"}}>{[r.first, r.middle, r.last].filter(Boolean).join(" ")}</td>
                          <td style={{padding:"8px"}}>{r.phone}</td>
                          <td style={{padding:"8px"}}>{r.email}</td>
                          <td style={{padding:"8px", maxWidth:360, overflow:"hidden", textOverflow:"ellipsis", whiteSpace:"nowrap"}}>{r.why}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                )}
              </div>
            )}
          </div>
        </section>
      );
    };

	// ---- 
	// put this anywhere above Advertise (e.g., near other small components)
const AdBanner = ({ src, href = "#", alt = "Sponsor" }) => (
  <div style={{ textAlign:"center", margin:"16px 0" }}>
    <a href={href} target="_blank" rel="noopener noreferrer">
      <img src={src} alt={alt} style={{ maxWidth:"100%", height:"auto", borderRadius:12, boxShadow:"0 8px 24px rgba(0,0,0,.08)" }} />
    </a>
  </div>
);

// ----Advertize (updated)-----
const Advertise = () => (
  <section className="page" id="advertise">
    <div className="container">
      <h2>Advertise With Kiboga Hill Farm Uganda</h2>
      <p className="muted">
        Advertise with Kiboga Hill Farm Uganda — the leading online farm and climate-smart
        advisory platform reaching farmers, livestock traders, youth and agri-professionals
        across Uganda and East Africa.
      </p>

      <h3>Why Advertise With Us?</h3>
      <ul>
        <li>Targeted reach in the agriculture and climate-smart community</li>
        <li>Affordable local rates and flexible packages</li>
        <li>Multi-channel visibility — web, TikTok, and WhatsApp groups</li>
      </ul>

      {/* === Live Demo (Preview) of Ad Slots === */}
      <h3 style={{marginTop:16}}>Live Demo (Preview)</h3>
      <div style={{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center",marginTop:10}}>
        {/* Homepage Banner preview */}
        <a href="#" aria-label="Homepage Banner preview"
           style={{borderRadius:12,overflow:"hidden",boxShadow:"0 10px 25px rgba(0,0,0,.10)"}}>
          {/* Use an existing image so it never 404s */}
          <img src="Images/camp-poster.png" alt="Homepage Banner — sample ad"
               width="728" height="90" loading="lazy" decoding="async"
               style={{display:"block",maxWidth:"100%",height:"auto"}}/>
        </a>

        {/* Sidebar Ad preview */}
        <a href="#" aria-label="Sidebar Ad preview"
           style={{borderRadius:12,overflow:"hidden",boxShadow:"0 10px 25px rgba(0,0,0,.10)"}}>
          <img src="Images/khf-logo.png" alt="Sidebar Ad — sample ad"
               width="300" height="250" loading="lazy" decoding="async"
               style={{display:"block",maxWidth:"100%",height:"auto"}}/>
        </a>
      </div>

      <h3 style={{marginTop:22}}>Available Placements</h3>
      <table className="muted" style={{width:"100%",maxWidth:720}}>
        <thead>
          <tr><th>Placement</th><th>Description</th><th>Rate (UGX)</th></tr>
        </thead>
        <tbody>
          <tr><td>Homepage Banner</td><td>Top of all pages</td><td>150,000</td></tr>
          <tr><td>Sidebar Ad</td><td>Visible on all pages</td><td>100,000</td></tr>
          <tr><td>Footer Logo</td><td>Sitewide</td><td>80,000</td></tr>
        </tbody>
      </table>

      <h3 style={{marginTop:22}}>Contact Us</h3>
      <p>Email: <a href="mailto:info@kibogahillfarmuganda.co.ug">info@kibogahillfarmuganda.co.ug</a></p>
      <p>Phone / WhatsApp: +256 763 081 880</p>

      {/* Media Kit + Partner CTA */}
      <div style={{display:"flex",gap:10,flexWrap:"wrap",marginTop:10}}>
        <a
          className="btn"
          href="Images/KHFU-Media-Kit-2025.pdf"
          target="_blank"
          rel="noopener noreferrer"
        >
          Download Media Kit (PDF)
        </a>

        <a
          className="btn"
          href={`mailto:info@kibogahillfarmuganda.co.ug?subject=${encodeURIComponent("Advertising Inquiry - Kiboga Hill Farm")}&body=${encodeURIComponent("Hello KHFU team,\n\nWe'd like to advertise on your website. Please share available slots and payment options.\n\nRegards,\n")}`}
          aria-label="Start an advertising inquiry by email"
        >
          Partner With Us →
        </a>
      </div>
    </div>
  </section>
);


	
// --- Gallery: Farm Photos (thumbs in /Images/thumbs) ---
const Gallery = () => {
  // Keep base names EXACTLY as your files are named
  const photos = [
    { base: "Coffee_Spread",  cap: "Coffee spread" },
    { base: "Education_Tours",cap: "Education tours" },
    { base: "Faithwithbby",   cap: "Faith with baby goat" },
    { base: "First_Camp",     cap: "First camp highlights" },
    { base: "Goats_Rest",     cap: "Goats at rest" },
    { base: "Goats_sold",     cap: "Farm-gate goat sales" },
    { base: "Mtn_Hiking",     cap: "Mountain hiking" },
    { base: "camp-poster",    cap: "Camp poster" },
  ];

  // Progressive image with fallback chain (unchanged)
  const SmartImg = ({ srcs, alt }) => {
    const [i, setI] = React.useState(0);
    const [hide, setHide] = React.useState(false);
    if (hide) return null;
    const onError = () => (i < srcs.length - 1 ? setI(i + 1) : setHide(true));
    const onLoad  = (e) => e.currentTarget.classList.add("img-loaded");
    return <img src={srcs[i]} alt={alt} loading="lazy" decoding="async" onError={onError} onLoad={onLoad} />;
  };

  // --- Lightbox state (index of selected photo, or -1 when closed) ---
  const [idx, setIdx] = React.useState(-1);
  const isOpen = idx >= 0;

  const open = (i) => setIdx(i);
  const close = () => setIdx(-1);

  const next = React.useCallback(() => {
    setIdx((i) => (i + 1) % photos.length);
  }, [photos.length]);

  const prev = React.useCallback(() => {
    setIdx((i) => (i - 1 + photos.length) % photos.length);
  }, [photos.length]);

  // Keyboard handlers: Esc to close, ArrowLeft/Right to navigate
  React.useEffect(() => {
    if (!isOpen) return;
    const onKey = (e) => {
      if (e.key === "Escape") close();
      else if (e.key === "ArrowRight") next();
      else if (e.key === "ArrowLeft") prev();
    };
    window.addEventListener("keydown", onKey);
    return () => window.removeEventListener("keydown", onKey);
  }, [isOpen, next, prev]);

  return (
    <section className="page" id="gallery">
      <div className="container">
        <h2>Farm Photos</h2>
        <p className="muted">A look into daily life at Kiboga Hill Farm Uganda.</p>

        <div className="gallery-grid">
          {photos.map(({ base, cap }, i) => {
            const thumb520   = `Images/thumbs/${base}-520.webp`;
            const large1040  = `Images/thumbs/${base}-1040.webp`;
            const fallbackJpg= `Images/${base}.jpg`;
            const fallbackPng= `Images/${base}.png`;

            return (
              <figure key={base} className="gallery-tile" onClick={() => open(i)} style={{cursor:"zoom-in"}}>
                <SmartImg srcs={[thumb520, fallbackJpg, fallbackPng]} alt={cap} width={260} height={200} />
                <figcaption className="gallery-caption">{cap}</figcaption>
              </figure>
            );
          })}
        </div>
      </div>

      {/* ---- Lightbox overlay with arrows ---- */}
      {isOpen && (
        <div
          onClick={close}
          style={{
            position:"fixed", inset:0, background:"rgba(0,0,0,.86)",
            display:"flex", alignItems:"center", justifyContent:"center",
            zIndex:60, padding:"24px", cursor:"zoom-out"
          }}
          aria-modal="true" role="dialog"
        >
          {/* inner container to stop propagation */}
          <div onClick={(e)=>e.stopPropagation()} style={{position:"relative", maxWidth:"96vw", textAlign:"center", cursor:"default"}}>
            <img
              src={`Images/thumbs/${photos[idx].base}-1040.webp`}
              alt={photos[idx].cap}
              style={{
                maxWidth:"92vw", maxHeight:"80vh",
                borderRadius:12, boxShadow:"0 20px 60px rgba(0,0,0,.45)"
              }}
            />
            <div style={{ color:"#fff", marginTop:10, fontWeight:600 }}>{photos[idx].cap}</div>

            {/* Prev / Next buttons */}
            <button
              onClick={prev}
              aria-label="Previous photo"
              style={{
                position:"absolute", left:-8, top:"50%", transform:"translateY(-50%)",
                background:"rgba(255,255,255,.14)", color:"#fff",
                border:"0", borderRadius:12, padding:"10px 12px", fontSize:20, fontWeight:900, cursor:"pointer"
              }}
            >‹</button>

            <button
              onClick={next}
              aria-label="Next photo"
              style={{
                position:"absolute", right:-8, top:"50%", transform:"translateY(-50%)",
                background:"rgba(255,255,255,.14)", color:"#fff",
                border:"0", borderRadius:12, padding:"10px 12px", fontSize:20, fontWeight:900, cursor:"pointer"
              }}
            >›</button>

            {/* Close (X) */}
            <button
              onClick={close}
              aria-label="Close"
              style={{
                position:"absolute", top:-8, right:-8,
                background:"rgba(255,255,255,.14)", color:"#fff",
                border:"0", borderRadius:12, padding:"8px 10px", fontWeight:900, cursor:"pointer"
              }}
            >✕</button>
          </div>
        </div>
      )}
    </section>
  );
};



	function CampLogoBadge(){
  return (
    <div style={{position:"absolute",left:0,right:0,top:10,display:"grid",justifyItems:"center",zIndex:4,pointerEvents:"none"}}>
      <div style={{display:"grid",gridTemplateRows:"auto auto",justifyItems:"center",gap:8}}>
        <div style={{width:108,height:108,borderRadius:"999px",display:"grid",placeItems:"center",background:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,.08)",position:"relative",overflow:"hidden"}}>
          <picture>
            <source type="image/webp" srcSet="Images/khf-logo.webp" />
            <img
              src="Images/khf-logo.png"
              onError={(e)=>{ e.currentTarget.src="Images/khf-logo.PNG"; }}
              alt="Kiboga Hill Farm logo"
              width="72" height="72" loading="lazy" decoding="async"
            />
          </picture>
          <span style={{position:"absolute",bottom:-6,right:-6,background:"linear-gradient(135deg,#10b981,#84cc16)",color:"#fff",fontWeight:900,fontSize:12,padding:"6px 10px",borderRadius:999,boxShadow:"0 10px 25px rgba(0,0,0,.08)"}}>
            Nov 29–30
          </span>
        </div>
        <div style={{fontSize:".95rem",color:"var(--ink)",textAlign:"center"}}>What we have at Kiboga Hill Farm.</div>
      </div>
    </div>
  );
}
// --- News / Spotlight (one-at-a-time, ~20s, with animated caption) ---
function NewsSpotlight(){
  // Order matters: logo first, then other news images
  const items = [
    {
      srcs: ["Images/khf-logo.webp","Images/khf-logo.png","Images/khf-logo.PNG"],
      alt: "Kiboga Hill Farm — Company Logo",
      caption: "Kiboga Hill Farm Uganda — official updates & announcements",
    },
    {
      srcs: ["Images/camp-poster.avif","Images/camp-poster.webp","Images/camp-poster.png"],
      alt: "Kiboga Hill Farm Camp",
      caption: "November Camp: training, goat choma, campfire & networking",
    },
    // add more items here later…
  ];

  // simple fallback-through <img> (avoids broken sources)
  const SmartImg = ({ srcs, alt, onLoad }) => {
    const [i, setI] = React.useState(0);
    const [hide, setHide] = React.useState(false);
    if (hide) return null;
    return (
      <img
        src={srcs[i]}
        alt={alt}
        onError={() => (i < srcs.length - 1 ? setI(i+1) : setHide(true))}
        onLoad={onLoad}
        loading="eager"
        decoding="async"
        width={640}
		height={640}
		style={{ width:"100%", height:"100%", objectFit:"contain", display:"block" }}

      />
    );
  };

  const [idx, setIdx] = React.useState(0);
  const [ready, setReady] = React.useState(false);

  // rotate every ~3s, pause on hover via a flag
  const [paused, setPaused] = React.useState(false);
  React.useEffect(() => {
    if (paused) return;
    const t = setInterval(() => setIdx(i => (i + 1) % items.length), 3000);
    return () => clearInterval(t);
  }, [paused, items.length]);

  const it = items[idx];

  return (
    <div className="news-spotlight"
         onMouseEnter={() => setPaused(true)}
         onMouseLeave={() => setPaused(false)}>

      <div className={`news-frame ${ready ? "is-ready":""}`}>
        <SmartImg srcs={it.srcs} alt={it.alt} onLoad={() => setReady(true)} />
      </div>

      <div className="news-caption" aria-live="polite">
        <div key={idx} className="news-caption-line">{it.caption}</div>
      </div>
    </div>
  );
}
// === Family Background (place above function App) ===
const FamilyBackground = () => (
  <div
    style={{
      background: "linear-gradient(90deg,#d1fae5,#fef3c7)",
      padding: "22px 24px",
      borderRadius: "16px",
      marginBottom: 20,
      boxShadow: "0 10px 25px rgba(0,0,0,.06)"
    }}
  >
    <h2 style={{ margin: 0 }}>Background to Kiboga Hill Farm Family</h2>
    <p className="muted" style={{ marginTop: 10 }}>
      The <b>Kiboga Hill Farm Family</b> began in <b>February 2025</b> from TikTok Lives,
      where interested viewers shared WhatsApp numbers to join our group. As of
      <b> 8 October 2025</b> we are <b>85</b> voluntary members. We’ll keep the door open
      until we reach <b>100</b> highly active members aligned to our routine programs.
      After 100, new admissions will prioritize owners of large farm enterprises,
      agricultural professionals, and veterinary experts.
    </p>

    <h3 style={{ margin: "16px 0 8px" }}>Family Project Vision</h3>
    <p className="muted">
      Our goal is a jointly owned project where members contribute equally and
      share equal rights. In <b>April 2025</b>, members began buying <b>goats</b> and
      <b> cattle</b> managed at Kiboga Hill Farm. <b>Princess Sharifah</b> bought the
      first goat and mobilized friends—<b>SwtRema</b>, <b>Tricia Tricia</b>, <b>Faluwa</b>.
      Another circle by <b>Tracy United</b> with <b>Agie Amazing</b> and <b>Lilly Nshuti</b>
      contributed monthly. Animals were selected over WhatsApp video calls.
      In <b>June 2025</b> we paused individual purchases to draft SOPs.
    </p>

    <h3 style={{ margin: "16px 0 8px" }}>Launch of the Family Project</h3>
    <p className="muted">
      On <b>7 July 2025</b>, <b>Bruno Ahimbisibwe (BRUMAX UG)</b> proposed immediately
      starting the project to reduce member uncertainty. Members agreed to begin
      from <b>September–December 2025</b> with a monthly contribution of
      <b> UGX 50,000</b>. Funds are invested (goats, cattle, poultry, or other) by
      majority decision. After sales, proceeds are shared equally among
      contributors.
    </p>

    <h3 style={{ margin: "16px 0 8px" }}>Accountability & Participation</h3>
    <p className="muted">
      We camp at the farm <b>every three months</b> to review progress and solve
      challenges. Anyone can join the Family; to join the <b>Family Project</b> you
      sign a membership form and provide a <b>next of kin</b>.
    </p>

    <h3 style={{ margin: "16px 0 8px" }}>Interim Committee (Jun–Dec 2025)</h3>
    <ul className="muted" style={{ margin: "8px 0 0 18px" }}>
      <li><b>Chairperson:</b> Mr. Kalema Abubakar (Kiboga Hill Farm Uganda)</li>
      <li><b>Vice Chairperson:</b> Mr. Derek Danielz</li>
      <li><b>General Secretary:</b> Ms. Suzie Savior</li>
      <li><b>Publicity:</b> Sky Rich &amp; Princess Sharifah</li>
      <li><b>Mobilizers / Disciplinary:</b> Dota wa Kiboga, Swt Rema,
          Tricia Tricia, Tracy United, Amutex, Fr. Ignatius (Ewacu Heza)
      </li>
    </ul>
    <p className="muted" style={{ marginTop: 8 }}>
      Elections for the next term will be held in <b>December 2025</b> for
      <b> January–December 2026</b>.
    </p>
  </div>
);

    function App(){
      const { parts } = useHashRoute();
      const route = (parts[0] || "").toLowerCase();
      const sub   = (parts[1] || "").toLowerCase();

      useEffect(() => {
        if (route === "services" && sub === "camps") {
          window.location.hash = "#/camps";
        }
      }, [route, sub]);

		useEffect(() => {
  if (route === "services" && sub === "climate") {
    window.location.hash = "#/advisory";
  }
}, [route, sub]);


      useEffect(() => {
        const fails = [];
        const assert = (name, cond) => { if (cond) console.log("✅", name); else { console.error("❌", name); fails.push(name); } };
        assert("Nav exists", !!document.querySelector("nav.khf-nav"));
        assert("Router working (page rendered)", !!document.querySelector("section.page, section.hero"));
        if (fails.length === 0) console.log("🎉 All smoke tests passed."); else console.warn("ℹ️ Smoke tests failed:", fails);
      }, [route, sub]);

      useEffect(() => {
        const nav = document.querySelector("nav.khf-nav");
        if (!nav) return;
        const closeOnClick = (e) => {
          const d = e.target.closest("details");
          if (d) d.open = false;
        };
        const links = nav.querySelectorAll(".menu a");
        links.forEach(a => a.addEventListener("click", closeOnClick));
        return () => links.forEach(a => a.removeEventListener("click", closeOnClick));
      }, [route, sub]);

		// Close the Core Services dropdown when clicking/tapping anywhere outside it
useEffect(() => {
  const nav = document.querySelector("nav.khf-nav");
  if (!nav) return;

  const closeIfOutside = (e) => {
    const openDetails = nav.querySelector("details[open]");
    if (!openDetails) return;

    // If the click/touch did NOT happen inside the open <details>, close it.
    if (!openDetails.contains(e.target)) {
      openDetails.open = false;
    }
  };

  const closeOnEsc = (e) => {
    if (e.key === "Escape") {
      const openDetails = nav.querySelector("details[open]");
      if (openDetails) openDetails.open = false;
    }
  };

  document.addEventListener("mousedown", closeIfOutside);
  document.addEventListener("touchstart", closeIfOutside, { passive: true });
  document.addEventListener("keydown", closeOnEsc);

  return () => {
    document.removeEventListener("mousedown", closeIfOutside);
    document.removeEventListener("touchstart", closeIfOutside);
    document.removeEventListener("keydown", closeOnEsc);
  };
}, [route, sub]);


      return (
  		<div className="khf-root" id="main" role="main">
          <header className="khf-header">
            <div className="container row">
              <Link to="#/" className="brand"><span className="logo">KH</span> Kiboga Hill Farm Uganda</Link>

              <nav className="khf-nav" aria-label="Primary">
                <Link to="#/about">About</Link>
                <Link to="#/camps">Camps & Farm Visits</Link>
			
                <details>
                  <summary>Core Services ▾</summary>
                  <div className="menu" role="menu">
  <div className="menu-label">Livestock & Crops</div>
  <Link to="#/products" role="menuitem">All Livestock & Crops</Link>

  <div className="menu-sep"></div>

  {/* Core services (no label) */}
  <Link to="#/services/sales" role="menuitem">Farm Gate Services</Link>

  <div className="menu-sep"></div>
  <div className="menu-label">Advisory</div>
  <Link to="#/advisory" role="menuitem">Weather-Smart Advisory</Link>
</div>

				</details>

                <Link to="#/family">Family</Link>
				<Link to="#/advertise">Advertise</Link>
                <Link to="#/gallery">Gallery</Link>
                <Link to="#/contact">Contact</Link>
              </nav>
            </div>
        </header>

{(!route || route === "") && <Home/>}
{route === "about" && <About/>}
{route === "camps" && <Camps/>}
{route === "products" && !sub && <ProductsIndex/>}
{route === "products" && sub && <ProductDetail slug={sub}/>}
{route === "services" && !sub && <ServicesIndex/>}
{route === "services" && sub && <ServiceDetail slug={sub}/>}
{route === "advisory" && <Advisory/>}
{route === "advertise" && <Advertise/>}
{route === "gallery" && <Gallery/>}
{route === "contact" && <Contact/>}
{route === "admin" && <Admin/>}
{route === "family" && (sub === "join" ? <FamilyForm/> : <Family/>)}
{(!["", "about", "products", "services", "family", "advisory", "advertise", "gallery", "contact", "camps", "admin"].includes(route)) && <NotFound/>}

<footer>
  <div className="container" style={{textAlign: "center"}}>
    © {new Date().getFullYear()} Kiboga Hill Farm Uganda. All rights reserved.
    <div style={{fontSize:12, color:"#6b7280", marginTop:6}}>
      3Km from Kikuubo, Bukomero T.C., Kyomya S/C, Kiboga • WhatsApp: <a href="tel:+256763081880">+256 763 081 880</a>
    </div>
  </div>
</footer>

        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>

  <noscript>
    <div style="max-width:760px;margin:24px auto;padding:16px;border:1px solid #e5e7eb;border-radius:12px;font-family:system-ui">
      JavaScript is required to view this site. Please enable it and refresh.
    </div>
  </noscript>

	<script defer data-domain="kibogahillfarmuganda.co.ug" src="https://plausible.io/js/script.js">
		</script>
<script>
  (function() {
    function sendPageView() {
      gtag('event', 'page_view', {
        page_title: document.title,
        page_location: location.href,
        page_path: location.hash || '/'
      });
    }
    if (window.gtag) sendPageView();
    window.addEventListener('hashchange', sendPageView);
  })();
</script>
</body>
</html>




























